(function(){"use strict";let r,a=null;function o(){return(a===null||a.byteLength===0)&&(a=new Uint8Array(r.memory.buffer)),a}function _(e,t){return e=e>>>0,o().subarray(e/1,e/1+t)}function d(e){const t=r.__externref_table_alloc();return r.__wbindgen_export_2.set(t,e),t}function m(e,t){try{return e.apply(this,t)}catch(n){const s=d(n);r.__wbindgen_exn_store(s)}}const u=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&u.decode();function l(e,t){return e=e>>>0,u.decode(o().subarray(e,e+t))}let b=0;function p(e,t){const n=t(e.length*1,1)>>>0;return o().set(e,n/1),b=e.length,n}function x(e){const t=r.__wbindgen_export_2.get(e);return r.__externref_table_dealloc(e),t}function A(e,t,n,s){let g,y;try{const M=p(e,r.__wbindgen_malloc),D=b,i=r.generate(M,D,t,n,s);var c=i[0],f=i[1];if(i[3])throw c=0,f=0,x(i[2]);return g=c,y=f,l(c,f)}finally{r.__wbindgen_free(g,y,1)}}async function h(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(s){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function U(){const e={};return e.wbg={},e.wbg.__wbg_getRandomValues_3c9c0d586e575a16=function(){return m(function(t,n){globalThis.crypto.getRandomValues(_(t,n))},arguments)},e.wbg.__wbindgen_error_new=function(t,n){return new Error(l(t,n))},e.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function R(e,t){return r=e.exports,w.__wbindgen_wasm_module=t,a=null,r.__wbindgen_start(),r}async function w(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/makemore-fun/assets/web_bg-D4eSb4ES.wasm",self.location.href));const t=U();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await h(await e,t);return R(n,s)}async function T(){await w();const e=await fetch(E("/weights/default-tiny-shakespeare.safetensors")),t=new Uint8Array(await e.arrayBuffer());return A(t,500,1,BigInt(Date.now()))}onmessage=async e=>{if(e.data.type==="generate"){const t=await T();W({type:"output",text:t})}};function W(e){postMessage(e)}function E(e){const t="/makemore-fun/",n=new URL(t,self.location.href);return new URL(e.slice(1),n)}})();
